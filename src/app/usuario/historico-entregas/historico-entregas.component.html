<div class="p-6 max-w-6xl mx-auto">
  <h1 class="text-3xl font-bold mb-6" style="color: var(--color-foreground)">Histórico de Entregas</h1>

  <!-- Lista de entregas -->
  <div class="bg-white rounded-lg shadow-md border" style="border-color: var(--color-secondary)">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b" style="background-color: var(--color-bg); border-color: var(--color-secondary)">
            <th class="px-4 py-3 text-left text-sm font-semibold" style="color: var(--color-foreground)">Fecha</th>
            <th class="px-4 py-3 text-left text-sm font-semibold" style="color: var(--color-foreground)">Hora</th>
            <th class="px-4 py-3 text-left text-sm font-semibold" style="color: var(--color-foreground)">Medicamentos</th>
            <th class="px-4 py-3 text-left text-sm font-semibold" style="color: var(--color-foreground)">Operador</th>
            <th class="px-4 py-3 text-left text-sm font-semibold" style="color: var(--color-foreground)">Estado</th>
            <th class="px-4 py-3 text-left text-sm font-semibold" style="color: var(--color-foreground)">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let entrega of entregas" class="border-b hover:bg-opacity-50"
              style="border-color: var(--color-secondary)"
              [style.hover:background-color]="'var(--color-bg)'">
            <td class="px-4 py-3 text-sm" style="color: var(--color-foreground)">{{ entrega.fecha }}</td>
            <td class="px-4 py-3 text-sm" style="color: var(--color-foreground)">{{ entrega.hora }}</td>
            <td class="px-4 py-3 text-sm" style="color: var(--color-foreground)">
              <span class="inline-block px-2 py-1 rounded text-xs" style="background-color: var(--color-secondary)">
                {{ entrega.medicamentos.length }} medicamento(s)
              </span>
            </td>
            <td class="px-4 py-3 text-sm" style="color: var(--color-foreground)">{{ entrega.operador }}</td>
            <td class="px-4 py-3 text-sm">
              <span class="inline-block px-2 py-1 rounded text-xs font-medium text-white"
                    style="background-color: var(--color-accent)">
                {{ entrega.estado }}
              </span>
            </td>
            <td class="px-4 py-3 text-sm">
              <button
                (click)="verDetalle(entrega)"
                class="px-3 py-1 rounded text-xs font-medium hover:opacity-80"
                style="background-color: var(--color-primary); color: white">
                Ver detalle
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="entregas.length === 0" class="p-8 text-center" style="color: var(--color-foreground); opacity: 0.6">
      No hay entregas registradas
    </div>
  </div>

  <!-- Estadísticas -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
    <div class="p-4 rounded-lg text-center" style="background-color: var(--color-accent)">
      <p class="text-3xl font-bold text-white">{{ entregas.length }}</p>
      <p class="text-sm text-white opacity-90">Total Entregas</p>
    </div>
    <div class="p-4 rounded-lg text-center" style="background-color: var(--color-primary)">
      <p class="text-3xl font-bold text-white">100%</p>
      <p class="text-sm text-white opacity-90">Tasa de Éxito</p>
    </div>
  </div>
</div>

<!-- Modal de detalle -->
<div *ngIf="entregaSeleccionada"
     class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"
     (click)="cerrarDetalle()">
  <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full p-6"
       style="border: 2px solid var(--color-secondary)"
       (click)="$event.stopPropagation()">
    <div class="flex justify-between items-start mb-4">
      <h2 class="text-2xl font-bold" style="color: var(--color-primary)">Detalle de Entrega</h2>
      <button
        (click)="cerrarDetalle()"
        class="text-2xl font-bold hover:opacity-70"
        style="color: var(--color-foreground)">
        ×
      </button>
    </div>

    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <p class="text-sm font-medium mb-1" style="color: var(--color-foreground); opacity: 0.7">Fecha</p>
          <p class="font-semibold" style="color: var(--color-foreground)">{{ entregaSeleccionada.fecha }}</p>
        </div>
        <div>
          <p class="text-sm font-medium mb-1" style="color: var(--color-foreground); opacity: 0.7">Hora</p>
          <p class="font-semibold" style="color: var(--color-foreground)">{{ entregaSeleccionada.hora }}</p>
        </div>
      </div>

      <div>
        <p class="text-sm font-medium mb-2" style="color: var(--color-foreground); opacity: 0.7">Medicamentos</p>
        <ul class="space-y-1">
          <li *ngFor="let med of entregaSeleccionada.medicamentos"
              class="px-3 py-2 rounded"
              style="background-color: var(--color-bg); color: var(--color-foreground)">
            {{ med }}
          </li>
        </ul>
      </div>

      <div>
        <p class="text-sm font-medium mb-1" style="color: var(--color-foreground); opacity: 0.7">Operador</p>
        <p class="font-semibold" style="color: var(--color-foreground)">{{ entregaSeleccionada.operador }}</p>
      </div>

      <div>
        <p class="text-sm font-medium mb-1" style="color: var(--color-foreground); opacity: 0.7">Dirección de entrega</p>
        <p class="font-semibold" style="color: var(--color-foreground)">{{ entregaSeleccionada.direccion }}</p>
      </div>

      <div>
        <p class="text-sm font-medium mb-1" style="color: var(--color-foreground); opacity: 0.7">Estado</p>
        <span class="inline-block px-3 py-1 rounded font-medium text-white"
              style="background-color: var(--color-accent)">
          {{ entregaSeleccionada.estado }}
        </span>
      </div>
    </div>

    <button
      (click)="cerrarDetalle()"
      class="w-full mt-6 px-4 py-2 rounded-lg font-medium"
      style="background-color: var(--color-primary); color: white">
      Cerrar
    </button>
  </div>
</div>
